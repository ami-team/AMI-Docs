<!--
Diagram
(
  Terminal('QId'),
  Optional
  (
    Sequence
    (
      '{',

      OneOrMore(
        Sequence
        (
          Optional
          (
            '!',
            'skip'
          ),
          'QId'
        ),
      ','),
      '}'
     ),
    'skip'
  ),
);
-->
<svg xmlns="http://www.w3.org/2000/svg" class="railroad-diagram" width="422" height="132" viewBox="0 0 422 132">
    <g transform="translate(.5 .5)">
        <g>
            <path d="M20 21v20m10 -20v20m-10 -10h20"></path>
        </g>
        <path d="M40 31h10"></path>
        <g class="terminal ">
            <path d="M50 31h0"></path>
            <path d="M94 31h0"></path>
            <rect x="50" y="20" width="44" height="22" rx="10" ry="10"></rect>
            <text x="72" y="35">QId</text>
        </g>
        <path d="M94 31h10"></path>
        <g>
            <path d="M104 31h0"></path>
            <path d="M382 31h0"></path>
            <path d="M104 31h20"></path>
            <g>
                <path d="M124 31h238"></path>
            </g>
            <path d="M362 31h20"></path>
            <path d="M104 31a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path>
            <g>
                <path d="M124 51h0"></path>
                <path d="M362 51h0"></path>
                <g class="terminal ">
                    <path d="M124 51h0"></path>
                    <path d="M152 51h0"></path>
                    <rect x="124" y="40" width="28" height="22" rx="10" ry="10"></rect>
                    <text x="138" y="55">{</text>
                </g>
                <path d="M152 51h10"></path>
                <path d="M162 51h10"></path>
                <g>
                    <path d="M172 51h0"></path>
                    <path d="M314 51h0"></path>
                    <path d="M172 51h10"></path>
                    <g>
                        <path d="M182 51h0"></path>
                        <path d="M304 51h0"></path>
                        <g>
                            <path d="M182 51h0"></path>
                            <path d="M250 51h0"></path>
                            <path d="M182 51h20"></path>
                            <g>
                                <path d="M202 51h28"></path>
                            </g>
                            <path d="M230 51h20"></path>
                            <path d="M182 51a10 10 0 0 1 10 10v0a10 10 0 0 0 10 10"></path>
                            <g class="terminal ">
                                <path d="M202 71h0"></path>
                                <path d="M230 71h0"></path>
                                <rect x="202" y="60" width="28" height="22" rx="10" ry="10"></rect>
                                <text x="216" y="75">!</text>
                            </g>
                            <path d="M230 71a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path>
                        </g>
                        <path d="M250 51h10"></path>
                        <g class="terminal ">
                            <path d="M260 51h0"></path>
                            <path d="M304 51h0"></path>
                            <rect x="260" y="40" width="44" height="22" rx="10" ry="10"></rect>
                            <text x="282" y="55">QId</text>
                        </g>
                    </g>
                    <path d="M304 51h10"></path>
                    <path d="M182 51a10 10 0 0 0 -10 10v30a10 10 0 0 0 10 10"></path>
                    <g class="terminal ">
                        <path d="M182 101h47"></path>
                        <path d="M257 101h47"></path>
                        <rect x="229" y="90" width="28" height="22" rx="10" ry="10"></rect>
                        <text x="243" y="105">,</text>
                    </g>
                    <path d="M304 101a10 10 0 0 0 10 -10v-30a10 10 0 0 0 -10 -10"></path>
                </g>
                <path d="M314 51h10"></path>
                <path d="M324 51h10"></path>
                <g class="terminal ">
                    <path d="M334 51h0"></path>
                    <path d="M362 51h0"></path>
                    <rect x="334" y="40" width="28" height="22" rx="10" ry="10"></rect>
                    <text x="348" y="55">}</text>
                </g>
            </g>
            <path d="M362 51a10 10 0 0 0 10 -10v0a10 10 0 0 1 10 -10"></path>
        </g>
        <path d="M 382 31 h 20 m -10 -10 v 20 m 10 -20 v 20"></path>
    </g>
    <style>
        svg.railroad-diagram {
        background-color: hsl(30,20%,95%);
        }
        svg.railroad-diagram path {
        stroke-width: 3;
        stroke: black;
        fill: rgba(0,0,0,0);
        }
        svg.railroad-diagram text {
        font: bold 14px monospace;
        text-anchor: middle;
        }
        svg.railroad-diagram text.label {
        text-anchor: start;
        }
        svg.railroad-diagram text.comment {
        font: italic 12px monospace;
        }
        svg.railroad-diagram rect {
        stroke-width: 3;
        stroke: black;
        fill: hsl(120,100%,90%);
        }
    </style>
</svg>